var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
import { Key } from 'webdriverio';
import { Menu, MenuItem } from '../index.js';
import { PageDecorator, sleep } from '../utils.js';
import { ContentAssist as ContentAssistLocators } from '../../locators/1.73.0.js';
/**
 * Page object representing the content assistant
 *
 * @category Editor
 */
export let ContentAssist = class ContentAssist extends Menu {
    constructor(locators, parent) {
        super(locators);
        /**
         * @private
         */
        this.locatorKey = 'ContentAssist';
        this.setParentElement(parent.elem);
    }
    /**
     * Get content assist item by name/text, scroll through the list
     * until the item is found, or the end is reached
     *
     * @param name name/text to search by
     * @returns Promise resolving to ContentAssistItem object if found, undefined otherwise
     */
    async getItem(name) {
        let lastItem = false;
        let firstItem = await this.firstItem$$;
        while (firstItem.length < 1) {
            await browser.action('key')
                .down(Key.PageUp).up(Key.PageUp)
                .perform();
            firstItem = await this.firstItem$$;
        }
        while (!lastItem) {
            const items = await this.getItems();
            for (const item of items) {
                if (await item.getLabel() === name) {
                    return item;
                }
                lastItem = lastItem || (await item.elem.getAttribute('data-last-element')) === 'true';
            }
            if (!lastItem) {
                await browser.action('key')
                    .down(Key.PageDown).up(Key.PageDown)
                    .perform();
                await sleep(100);
            }
        }
        return undefined;
    }
    /**
     * Get all visible content assist items
     * @returns Promise resolving to array of ContentAssistItem objects
     */
    async getItems() {
        await browser.waitUntil(() => this.isLoaded());
        const elements = await this.elem
            .$(this.locators.itemRows)
            .$$(this.locators.itemRow);
        const items = [];
        for (const item of elements) {
            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
            items.push(await new ContentAssistItem(this.locatorMap, item, this).wait());
        }
        return items;
    }
    /**
     * Find if the content assist is still loading the suggestions
     * @returns promise that resolves to true when suggestions are done loading,
     * to false otherwise
     */
    async isLoaded() {
        const message = await this.message$;
        if (await message.isDisplayed()) {
            if ((await message.getText()).startsWith('No suggestions')) {
                return true;
            }
            return false;
        }
        return true;
    }
};
ContentAssist = __decorate([
    PageDecorator(ContentAssistLocators)
], ContentAssist);
/**
 * Page object for a content assist item
 *
 * @category Editor
 */
export let ContentAssistItem = class ContentAssistItem extends MenuItem {
    constructor(locators, item, contentAssist) {
        super(locators, item);
        /**
         * @private
         */
        this.locatorKey = 'ContentAssist';
        this.label = '';
        this.parentMenu = contentAssist;
    }
    async getLabel() {
        const labelDiv = await this.itemLabel$;
        return labelDiv.getText();
    }
};
ContentAssistItem = __decorate([
    PageDecorator(ContentAssistLocators)
], ContentAssistItem);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGVudEFzc2lzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wYWdlb2JqZWN0cy9lZGl0b3IvQ29udGVudEFzc2lzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQUUsR0FBRyxFQUEyQixNQUFNLGFBQWEsQ0FBQTtBQUUxRCxPQUFPLEVBQ1MsSUFBSSxFQUFFLFFBQVEsRUFDN0IsTUFBTSxhQUFhLENBQUE7QUFDcEIsT0FBTyxFQUNILGFBQWEsRUFBb0MsS0FBSyxFQUN6RCxNQUFNLGFBQWEsQ0FBQTtBQUNwQixPQUFPLEVBQUUsYUFBYSxJQUFJLHFCQUFxQixFQUFFLE1BQU0sMEJBQTBCLENBQUE7QUFHakY7Ozs7R0FJRztBQUVJLFdBQU0sYUFBYSxHQUFuQixNQUFNLGFBQWMsU0FBUSxJQUFrQztJQU1qRSxZQUNJLFFBQTBCLEVBQzFCLE1BQXFDO1FBRXJDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQVRuQjs7V0FFRztRQUNJLGVBQVUsR0FBRyxlQUF3QixDQUFBO1FBT3hDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDdEMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILEtBQUssQ0FBQyxPQUFPLENBQUUsSUFBWTtRQUN2QixJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUE7UUFDcEIsSUFBSSxTQUFTLEdBQUcsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFBO1FBQ3RDLE9BQU8sU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDekIsTUFBTSxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztpQkFDdEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztpQkFDL0IsT0FBTyxFQUFFLENBQUE7WUFDZCxTQUFTLEdBQUcsTUFBTSxJQUFJLENBQUMsV0FBVyxD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InNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtleSwgQ2hhaW5hYmxlUHJvbWlzZUVsZW1lbnQgfSBmcm9tICd3ZWJkcml2ZXJpbydcblxuaW1wb3J0IHtcbiAgICBUZXh0RWRpdG9yLCBNZW51LCBNZW51SXRlbSwgRGVidWdDb25zb2xlVmlld1xufSBmcm9tICcuLi9pbmRleC5qcydcbmltcG9ydCB7XG4gICAgUGFnZURlY29yYXRvciwgSVBhZ2VEZWNvcmF0b3IsIFZTQ29kZUxvY2F0b3JNYXAsIHNsZWVwXG59IGZyb20gJy4uL3V0aWxzLmpzJ1xuaW1wb3J0IHsgQ29udGVudEFzc2lzdCBhcyBDb250ZW50QXNzaXN0TG9jYXRvcnMgfSBmcm9tICcuLi8uLi9sb2NhdG9ycy8xLjczLjAuanMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGVudEFzc2lzdCBleHRlbmRzIElQYWdlRGVjb3JhdG9yPHR5cGVvZiBDb250ZW50QXNzaXN0TG9jYXRvcnM+IHt9XG4vKipcbiAqIFBhZ2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY29udGVudCBhc3Npc3RhbnRcbiAqXG4gKiBAY2F0ZWdvcnkgRWRpdG9yXG4gKi9cbkBQYWdlRGVjb3JhdG9yKENvbnRlbnRBc3Npc3RMb2NhdG9ycylcbmV4cG9ydCBjbGFzcyBDb250ZW50QXNzaXN0IGV4dGVuZHMgTWVudTx0eXBlb2YgQ29udGVudEFzc2lzdExvY2F0b3JzPiB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgbG9jYXRvcktleSA9ICdDb250ZW50QXNzaXN0JyBhcyBjb25zdFxuXG4gICAgY29uc3RydWN0b3IgKFxuICAgICAgICBsb2NhdG9yczogVlNDb2RlTG9jYXRvck1hcCxcbiAgICAgICAgcGFyZW50OiBUZXh0RWRpdG9yIHwgRGVidWdDb25zb2xlVmlld1xuICAgICkge1xuICAgICAgICBzdXBlcihsb2NhdG9ycylcbiAgICAgICAgdGhpcy5zZXRQYXJlbnRFbGVtZW50KHBhcmVudC5lbGVtKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjb250ZW50IGFzc2lzdCBpdGVtIGJ5IG5hbWUvdGV4dCwgc2Nyb2xsIHRocm91Z2ggdGhlIGxpc3RcbiAgICAgKiB1bnRpbCB0aGUgaXRlbSBpcyBmb3VuZCwgb3IgdGhlIGVuZCBpcyByZWFjaGVkXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBuYW1lL3RleHQgdG8gc2VhcmNoIGJ5XG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gQ29udGVudEFzc2lzdEl0ZW0gb2JqZWN0IGlmIGZvdW5kLCB1bmRlZmluZWQgb3RoZXJ3aXNlXG4gICAgICovXG4gICAgYXN5bmMgZ2V0SXRlbSAobmFtZTogc3RyaW5nKTogUHJvbWlzZTxDb250ZW50QXNzaXN0SXRlbSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBsZXQgbGFzdEl0ZW0gPSBmYWxzZVxuICAgICAgICBsZXQgZmlyc3RJdGVtID0gYXdhaXQgdGhpcy5maXJzdEl0ZW0kJFxuICAgICAgICB3aGlsZSAoZmlyc3RJdGVtLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIuYWN0aW9uKCdrZXknKVxuICAgICAgICAgICAgICAgIC5kb3duKEtleS5QYWdlVXApLnVwKEtleS5QYWdlVXApXG4gICAgICAgICAgICAgICAgLnBlcmZvcm0oKVxuICAgICAgICAgICAgZmlyc3RJdGVtID0gYXdhaXQgdGhpcy5maXJzdEl0ZW0kJFxuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKCFsYXN0SXRlbSkge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCB0aGlzLmdldEl0ZW1zKClcblxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF3YWl0IGl0ZW0uZ2V0TGFiZWwoKSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXN0SXRlbSA9IGxhc3RJdGVtIHx8IChhd2FpdCBpdGVtLmVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWxhc3QtZWxlbWVudCcpKSA9PT0gJ3RydWUnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWxhc3RJdGVtKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci5hY3Rpb24oJ2tleScpXG4gICAgICAgICAgICAgICAgICAgIC5kb3duKEtleS5QYWdlRG93bikudXAoS2V5LlBhZ2VEb3duKVxuICAgICAgICAgICAgICAgICAgICAucGVyZm9ybSgpXG4gICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgdmlzaWJsZSBjb250ZW50IGFzc2lzdCBpdGVtc1xuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIGFycmF5IG9mIENvbnRlbnRBc3Npc3RJdGVtIG9iamVjdHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRJdGVtcyAoKTogUHJvbWlzZTxDb250ZW50QXNzaXN0SXRlbVtdPiB7XG4gICAgICAgIGF3YWl0IGJyb3dzZXIud2FpdFVudGlsKCgpID0+IHRoaXMuaXNMb2FkZWQoKSlcblxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IGF3YWl0IHRoaXMuZWxlbVxuICAgICAgICAgICAgLiQodGhpcy5sb2NhdG9ycy5pdGVtUm93cylcbiAgICAgICAgICAgIC4kJCh0aGlzLmxvY2F0b3JzLml0ZW1Sb3cpXG4gICAgICAgIGNvbnN0IGl0ZW1zOiBDb250ZW50QXNzaXN0SXRlbVtdID0gW11cblxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICBpdGVtcy5wdXNoKGF3YWl0IG5ldyBDb250ZW50QXNzaXN0SXRlbSh0aGlzLmxvY2F0b3JNYXAsIGl0ZW0gYXMgYW55LCB0aGlzKS53YWl0KCkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCBpZiB0aGUgY29udGVudCBhc3Npc3QgaXMgc3RpbGwgbG9hZGluZyB0aGUgc3VnZ2VzdGlvbnNcbiAgICAgKiBAcmV0dXJucyBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdHJ1ZSB3aGVuIHN1Z2dlc3Rpb25zIGFyZSBkb25lIGxvYWRpbmcsXG4gICAgICogdG8gZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgYXN5bmMgaXNMb2FkZWQgKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGhpcy5tZXNzYWdlJFxuICAgICAgICBpZiAoYXdhaXQgbWVzc2FnZS5pc0Rpc3BsYXllZCgpKSB7XG4gICAgICAgICAgICBpZiAoKGF3YWl0IG1lc3NhZ2UuZ2V0VGV4dCgpKS5zdGFydHNXaXRoKCdObyBzdWdnZXN0aW9ucycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRBc3Npc3RJdGVtIGV4dGVuZHMgSVBhZ2VEZWNvcmF0b3I8dHlwZW9mIENvbnRlbnRBc3Npc3RMb2NhdG9ycz4ge31cbi8qKlxuICogUGFnZSBvYmplY3QgZm9yIGEgY29udGVudCBhc3Npc3QgaXRlbVxuICpcbiAqIEBjYXRlZ29yeSBFZGl0b3JcbiAqL1xuQFBhZ2VEZWNvcmF0b3IoQ29udGVudEFzc2lzdExvY2F0b3JzKVxuZXhwb3J0IGNsYXNzIENvbnRlbnRBc3Npc3RJdGVtIGV4dGVuZHMgTWVudUl0ZW08dHlwZW9mIENvbnRlbnRBc3Npc3RMb2NhdG9ycz4ge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHVibGljIGxvY2F0b3JLZXkgPSAnQ29udGVudEFzc2lzdCcgYXMgY29uc3RcbiAgICBwdWJsaWMgcGFyZW50TWVudTogQ29udGVudEFzc2lzdFxuICAgIHB1YmxpYyBsYWJlbCA9ICcnXG5cbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIGxvY2F0b3JzOiBWU0NvZGVMb2NhdG9yTWFwLFxuICAgICAgICBpdGVtOiBzdHJpbmcgfCBDaGFpbmFibGVQcm9taXNlRWxlbWVudDxXZWJkcml2ZXJJTy5FbGVtZW50PixcbiAgICAgICAgY29udGVudEFzc2lzdDogQ29udGVudEFzc2lzdFxuICAgICkge1xuICAgICAgICBzdXBlcihsb2NhdG9ycywgaXRlbSlcbiAgICAgICAgdGhpcy5wYXJlbnRNZW51ID0gY29udGVudEFzc2lzdFxuICAgIH1cblxuICAgIGFzeW5jIGdldExhYmVsICgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBsYWJlbERpdiA9IGF3YWl0IHRoaXMuaXRlbUxhYmVsJFxuICAgICAgICByZXR1cm4gbGFiZWxEaXYuZ2V0VGV4dCgpXG4gICAgfVxufVxuIl19